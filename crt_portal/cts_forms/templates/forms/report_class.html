{% extends "forms/report_base.html" %}
{% load static %}
{% load compress %}
{% block form_questions %}
<fieldset class="usa-fieldset" aria-label="{{ current_step_name }}">
  <legend class="usa-sr-only">{{ current_step_name }}</legend hidden>
  {% for field in wizard.form.visible_fields %}
      {% if field.label == 'Other' %}
        <div class="usa-prose margin-bottom-2 padding-left-3" id='other-class-option' >
      {% else %}
        <div class="usa-prose margin-bottom-2">
        <label for="{{ field.id_for_label }}" class="big margin-bottom-0">{{ field.label }}</div>
      {% endif %}

      {% if field.errors %}
        <div class="usa-alert usa-alert--warning usa-alert--slim">
          <div class="usa-alert__body"><em class="usa-alert__text">
            {{ field.errors }}
          </em></div>
        </div>
      {% endif %}

    <div class="margin-bottom-1">
    {% if field.label == 'Other' %}
        <div>
          <p><em><label for="{{ field.id_for_label }}">{{ field.help_text }}</label></em></p>
          {{ field }}
          <em id="word_count_area" hidden>
            <span id="display_count">10</span>
            <span id="count_message">word(s) remaining</span>
          </em>
          <div id="word-limit-alert" class="usa-alert usa-alert--warning usa-alert--slim" hidden>
            <div class="usa-alert__body">
              <em class="usa-alert__text">10 word limit reached</em>
            </div>
        </div>
      </div>
    {% else %}
      <p><em>{{ field.help_text }}</em></p>
      {{ field }}
    {% endif %}
    </div>
  {% endfor %}

</fieldset>
<div class="margin-bottom-5"></div>
{% endblock %}

{% block page_js %}
{% compress js inline%}
<script type="text/javascript">
var otherbox = document.getElementById("other-class-option");
otherbox.setAttribute("hidden","");

var otherCheck = document.querySelectorAll('.' + 'usa-checkbox').item(11);
var otherCheckID = document.querySelectorAll('.' + 'usa-checkbox__input').item(11).id;

function checkOther(elem){
  var checkBox = document.querySelectorAll('.' + 'usa-checkbox__input').item(11);
  var otherArea = document.getElementById("other-class-option");
  if (checkBox.checked == true){
    otherArea.removeAttribute('hidden');
  } else {
    otherArea.setAttribute('hidden', '');
  }
}

otherCheck.setAttribute("onclick","checkOther(otherCheckID);");

window.selectionchange = checkOther(document.querySelectorAll('.' + 'usa-checkbox__input').item(11).id);
</script>
{% endcompress %}
{% endblock %}