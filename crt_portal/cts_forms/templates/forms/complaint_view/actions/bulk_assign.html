{% extends "forms/complaint_view/show/card.html" %}

{% load static %}

{% block title %}Bulk assign{% endblock %}

{% block extra_classes %}crt-actions-card{% endblock %}

{% block icon %}
  <img src="{% static "img/ic_personcheck-circle.svg" %}" alt="icon" class="icon" />
{% endblock %}

{% block card_content %}
  {% if ids_count %}
    <form class="usa-form" method="post" novalidate>
      {% csrf_token %}

      <input type="hidden" value="{{ return_url_args }}" name="next" id="next" />
      <input type="hidden" value="{{ ids }}" name="ids" id="ids" />
      <input type="hidden" value="{{ selected_all }}" name="all" id="all" />

      <div id="assign_section">
        {{ assign_form }}

        <button class="usa-button"
                disabled
                type="submit"
                name="selected_ids"
        >
          Apply changes to {{ ids_count }} records
        </button>

        {% if selected_all %}
          <button class="usa-button button--warning display-flex align-center"
                  id="show_warning_section"
                  disabled
          >
            Apply changes to {{ all_ids_count }} records
          </button>
        {% endif %}
      </div>

      {% if selected_all %}
        <div id="warning_section" hidden>
          <p>
            Are you sure you want to assign {{ all_ids_count }} records to <span id="warning_section_assignee"></span>?
          </p>
          <button class="usa-button button--warning display-flex align-center"
                  name="all"
                  value="all"
                  type="submit">
            Yes
          </button>
          <button class="usa-button"
                  id="cancel_warning_section">
            No
          </button>
        </div>
      {% endif %}
    </form>
  {% else %}
    <p>No records were selected.</p>
  {% endif %}
{% endblock %}
